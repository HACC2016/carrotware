(function() {
  'use strict';
  angular
    .module('jgefroh.components')
    .directive('boothMap', Directive);
  function Directive() {
    function Controller($sce, config) {
      var vm = this;
    }

    return {
      restrict: 'A',
      template: '<div style="width: 100%;"><div id="booth-map" style="height: 300px; width: 100%;"></div>' +
                '<div id="drop-container"><div id="drop-silhouette"></div></div>',
      replace: true,
      controller: ['$sce', 'config', Controller],
      controllerAs: 'vm',
      bindToController: true,
      scope: {
        location: '=',
        size: '@',
        onMarketVendorSelected: '&'
      },
      link: function(scope, element, attributes) {
          var map;

          function initMap() {

            var style = [
                {
                  stylers: [
                    { color: '#e8e2b5' }
                  ]
                },{
                  featureType: 'road.arterial',
                  elementType: 'geometry',
                  stylers: [
                    { hue: '#00ffee' },
                    { saturation: 50 }
                  ]
                },{
                  featureType: 'poi.business',
                  elementType: 'labels',
                  stylers: [
                    { visibility: 'off' }
                  ]
                }
              ];


      style = [
              {
                "featureType": "water",
                "stylers": [
                  { "color": "#b5e1e8" }
                ]
              },{
                "featureType": "landscape.man_made",
                "elementType": "geometry.fill",
                "stylers": [
                  { "color": "#e8e2b5" }
                ]
              },{
                "featureType": "landscape.natural",
                "elementType": "geometry.fill",
                "stylers": [
                  { "color": "#e8e2b5" },
                  { "saturation": 25 }
                ]
              },{
                "featureType": "poi.park",
                "elementType": "geometry.fill",
                "stylers": [
                  { "hue": "#f6ff00" },
                  { "saturation": 57 },
                  { "color": "#30d393" }
                ]
              },{
                "featureType": "poi.school",
                "stylers": [
                  { "color": "#e8e2b5" },
                  { "saturation": -45 }
                ]
              },{
              }
            ];

            // set up the map
            map = new google.maps.Map(document.getElementById('booth-map'), {
              center: new google.maps.LatLng(0, 0),
              zoom: 2,
              styles: style
            });

            var geojson = {"type":"FeatureCollection","features":[{"geometry":{"type":"Polygon","coordinates":[[[-157.80111522759307,21.26887019671652],[-157.80113715086065,21.26888097212776],[-157.80111906531127,21.2689178066721],[-157.80109714205335,21.268907031260863],[-157.80111522759307,21.26887019671652],[-157.80111522759307,21.26887019671652]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80108598136172,21.268857053086002],[-157.80110869093235,21.26886607564682],[-157.80109353264658,21.268904227694943],[-157.80107082307595,21.268895205134125],[-157.80108598136172,21.268857053086002],[-157.80108598136172,21.268857053086002]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80105713469473,21.268846718111085],[-157.80108024012108,21.268854670563456],[-157.80106687552873,21.268893476814625],[-157.80104377009275,21.268885524362258],[-157.80105714430428,21.268846718960976],[-157.80105713469473,21.268846718111085]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80102740920256,21.268839174900204],[-157.80105106901811,21.26884525690824],[-157.801040838232,21.2688850209085],[-157.8010172361414,21.268878944048094],[-157.80102746691782,21.268839180047838],[-157.80102740920256,21.268839174900204]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.8005511481193,21.269045576647176],[-157.80056262163814,21.269024001023354],[-157.80059886752724,21.269043268422426],[-157.8005873746927,21.269064853704094],[-157.80055106119872,21.269045576647176],[-157.8005511481193,21.269045576647176]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.8005383901072,21.269072753820605],[-157.80054853084354,21.26905052146338],[-157.80058587772686,21.26906754824261],[-157.8005757369905,21.26908976128415],[-157.8005383901072,21.26907266690001],[-157.8005383901072,21.269072753820605]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.8005276988737,21.269100182097983],[-157.80053669998446,21.26907746684855],[-157.80057484846884,21.26909260069033],[-157.8005658473581,21.26911531593976],[-157.8005276988737,21.269100182097983],[-157.8005276988737,21.269100182097983]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80051792513544,21.269127050220398],[-157.80052678137852,21.2691042770239],[-157.80056504575703,21.269119150103887],[-157.80055618951394,21.269141923300385],[-157.80051792513544,21.269127050220398],[-157.80051792513544,21.269127050220398]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80050805481872,21.26915465233897],[-157.80051657303724,21.269131763248343],[-157.80055503057264,21.269146076173367],[-157.8005465316698,21.269168965263994],[-157.80050805481872,21.26915465233897],[-157.80050805481872,21.26915465233897]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80099723152045,21.26883344338499],[-157.8010212652491,21.26883793943981],[-157.80101368947197,21.26887837616686],[-157.80098967583163,21.268873872202267],[-157.8009972430519,21.268833531677004],[-157.80099723152045,21.26883344338499]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80096592055793,21.268829550182463],[-157.80099019866867,21.268832390573742],[-157.80098540405126,21.268873171883016],[-157.80096112594052,21.268870331491737],[-157.80096592055793,21.268829550182463],[-157.80096592055793,21.268829550182463]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80093523811826,21.268828398735653],[-157.80095966618634,21.268829119346037],[-157.80095843688767,21.268870150242975],[-157.80093401844843,21.268869430482482],[-157.80093524773747,21.2688283995952],[-157.80093523811826,21.268828398735653]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80090564674455,21.268829041243052],[-157.8009300730839,21.268828365483696],[-157.80093119253428,21.26886947944775],[-157.80090676447583,21.26887017445519],[-157.80090563817805,21.268829137444836],[-157.80090564674455,21.268829041243052]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80087630179074,21.26883148977696],[-157.8009006656728,21.26882966430921],[-157.80090371105183,21.26887060070414],[-157.80087935850807,21.26887240778336],[-157.80087631826703,21.26883141367315],[-157.80087630179074,21.26883148977696]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80084352677633,21.268837006086436],[-157.80086767068167,21.26883332893954],[-157.80087386784018,21.26887389781487],[-157.8008497030256,21.2688775925487],[-157.80084350587674,21.26883702367337],[-157.80084352677633,21.268837006086436]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.8008141906015,21.26884289178913],[-157.80083814038417,21.26883809283535],[-157.8008462072144,21.2688783381729],[-157.80082223653213,21.26888315470396],[-157.8008141906015,21.26884289178913],[-157.8008141906015,21.26884289178913]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80078453443332,21.26885046568298],[-157.80080814592102,21.26884419322226],[-157.80081868463782,21.268883876106287],[-157.80079505391168,21.268890146915517],[-157.80078453443332,21.26885046568298],[-157.80078453443332,21.26885046568298]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80075602865924,21.268860213171237],[-157.80077922703268,21.268852547991443],[-157.8007921057485,21.268891511655816],[-157.80076891451225,21.26889920653348],[-157.8007560303204,21.268860193932813],[-157.80075602865924,21.268860213171237]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80072732268772,21.268871833663155],[-157.8007499480033,21.268862606887225],[-157.80076543845132,21.268900622721116],[-157.8007428139663,21.268909839877832],[-157.8007273284921,21.268871766309353],[-157.80072732268772,21.268871833663155]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80069693417488,21.268890924709996],[-157.80071727244535,21.268877354608396],[-157.80074001671662,21.268911534008563],[-157.80071967663045,21.26892507519458],[-157.80069693356643,21.268890915071466],[-157.80069693417488,21.268890924709996]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80067401521254,21.268907691606298],[-157.80069426771172,21.26889400644114],[-157.8007172823543,21.268928002052537],[-157.80069702985514,21.268941687217694],[-157.80067404418605,21.268907691606298],[-157.80067401521254,21.268907691606298]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80064907865895,21.268926843111238],[-157.80066837503156,21.26891187345281],[-157.80069355303124,21.268944294835613],[-157.80067423734295,21.26895928380973],[-157.80064907865895,21.268926833453396],[-157.80064907865895,21.268926843111238]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.800626208884,21.268947066636883],[-157.8006445587879,21.26893089940578],[-157.80067169732993,21.268961707928607],[-157.80065336674176,21.268977865501867],[-157.8006262281997,21.268947095610415],[-157.800626208884,21.268947066636883]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80060538657202,21.268968159368498],[-157.80062253890324,21.268950775249035],[-157.8006517828553,21.26897957494028],[-157.80063463052412,21.268996959059745],[-157.80060538657202,21.268968159368498],[-157.80060538657202,21.268968159368498]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80058522099344,21.26899219774258],[-157.80060077012251,21.268973364946493],[-157.80063242853564,21.268999508730598],[-157.80061686009088,21.269018341526685],[-157.80058522099344,21.26899219774258],[-157.80058522099344,21.26899219774258]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.8005668131425,21.269017395057958],[-157.8005809425685,21.268997461267638],[-157.80061442631416,21.269021200248552],[-157.80060030654602,21.269041124381026],[-157.80056682280036,21.269017395057958],[-157.8005668131425,21.269017395057958]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80136346153023,21.269262608474858],[-157.80137157479538,21.269239559064015],[-157.80141029277385,21.26925320428433],[-157.80140218073527,21.269276244114586],[-157.8013634725788,21.269262522259282],[-157.80136346153023,21.269262608474858]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80135404802954,21.269289347075926],[-157.8013621612947,21.269266297665084],[-157.80140088172624,21.26927992373389],[-157.8013927672249,21.269302982715654],[-157.80135405906847,21.26928926086035],[-157.80135404802954,21.269289347075926]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.8013445583671,21.269315920122228],[-157.80135267163223,21.269292870721046],[-157.8013913920638,21.269306496780196],[-157.80138327756245,21.269329555771616],[-157.80134455714057,21.26931592970281],[-157.8013445583671,21.269315920122228]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80133491273048,21.269342570566494],[-157.80134302600527,21.26931952116531],[-157.80138174397408,21.269333166385625],[-157.8013736319355,21.269356206215882],[-157.80133491150391,21.269342580147075],[-157.80133491273048,21.269342570566494]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80132574451005,21.269368230598843],[-157.80133385777518,21.269345181188005],[-157.80137257820675,21.26935880725681],[-157.80136446371506,21.26938186624823],[-157.8013257049612,21.26936823527324],[-157.80132574451005,21.269368230598843]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.8011070297546,21.269186181292408],[-157.8010834207532,21.269192435598182],[-157.8010939163499,21.269232121506747],[-157.80111752535134,21.269225867200973],[-157.8011070297546,21.269186181292408],[-157.8011070297546,21.269186181292408]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.8010799966322,21.269193338292006],[-157.80105638727875,21.2691996022421],[-157.8010668821904,21.26923930745888],[-157.80109048982186,21.269233091759876],[-157.8010799949102,21.269193386543094],[-157.8010799966322,21.269193338292006]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80105295350367,21.269200504593396],[-157.80102934449272,21.269206758889386],[-157.80103983940438,21.269246464106164],[-157.8010634470455,21.26924024840729],[-157.80105295041167,21.269200591451256],[-157.80105295350367,21.269200504593396]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80102591071764,21.26920766124068],[-157.80100230171635,21.2692139155368],[-157.80101280627247,21.269253621095974],[-157.80103641391344,21.26924740540676],[-157.80102590934766,21.269207699847453],[-157.80102591071764,21.26920766124068]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80099888723984,21.269214818573023],[-157.8009752782384,21.269221072878796],[-157.80098577315007,21.269260778095575],[-157.80100938078152,21.26925456239657],[-157.80099888586986,21.26921485717979],[-157.80099888723984,21.269214818573023]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80097184412094,21.269221984874545],[-157.80094823510987,21.269228239180187],[-157.80095873070658,21.26926792508875],[-157.8009823593586,21.26926166182358],[-157.80097184412094,21.269221984874545],[-157.80097184412094,21.269221984874545]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80094481098902,21.269229141864354],[-157.80092120197796,21.26923539617],[-157.80093170722878,21.269275082421093],[-157.80095531692476,21.26926880881689],[-157.80094480167745,21.26922913186772],[-157.80094481098902,21.269229141864354]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80091777785697,21.269236298863824],[-157.80089416885568,21.26924255315994],[-157.8009046644524,21.269282239068506],[-157.80092827345368,21.269275984772392],[-157.80091777785697,21.26923629886383],[-157.80091777785697,21.269236298863824]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80088856685617,21.26924454928958],[-157.8008654357355,21.269252397212863],[-157.8008785936623,21.269291271878622],[-157.80090174439493,21.26928343297768],[-157.80088856685617,21.26924454928957],[-157.80088856685617,21.26924454928958]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80086208089418,21.269253539302518],[-157.80083894915035,21.269261367925154],[-157.80085210707665,21.269300242581267],[-157.8008752385086,21.269292404303485],[-157.80086208058233,21.269253529647372],[-157.80086208089418,21.269253539302518]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.8008355943085,21.269262510005166],[-157.8008124625647,21.2692703386278],[-157.80082562049097,21.269309213283915],[-157.80084875192347,21.269301375015775],[-157.80083559399668,21.26926250035002],[-157.8008355943085,21.269262510005166]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.8008090980677,21.26927148101965],[-157.8007859663335,21.26927930964176],[-157.8007991342268,21.269318193641183],[-157.8008222668965,21.26931039398451],[-157.80080909837955,21.269271490674797],[-157.8008090980677,21.26927148101965]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.8007826211372,21.26928045141046],[-157.80075947040456,21.26928829031139],[-157.80077262801953,21.269327155322003],[-157.80079577906398,21.269319326076214],[-157.80078262113716,21.26928045141046],[-157.8007826211372,21.26928045141046]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80075612490654,21.269289422434063],[-157.800732993474,21.2692972607022],[-157.800746151089,21.269336125712808],[-157.80076928283282,21.269328297090176],[-157.80075614420718,21.26928942181091],[-157.80075612490654,21.269289422434063]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80072962866572,21.269298393448548],[-157.80070649724337,21.269306231725803],[-157.80071966512702,21.26934511572575],[-157.80074279624716,21.26933726779282],[-157.80072956109845,21.269298395620723],[-157.80072962866572,21.269298393448548]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80070314208004,21.269307364151192],[-157.80068001065771,21.26931520242845],[-157.80069316889583,21.26935408673971],[-157.80071630031816,21.26934624846245],[-157.80070314208004,21.269307364151185],[-157.80070314208004,21.269307364151192]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80114537442512,21.26914073379906],[-157.80115899198537,21.26912045232635],[-157.8011930841752,21.269143341416978],[-157.80117946661494,21.269163622889685],[-157.80114537442512,21.26914073379906],[-157.80114537442512,21.26914073379906]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80112885951164,21.269166085639945],[-157.80114247707186,21.269145804167238],[-157.8011765692617,21.269168693257864],[-157.80116295170146,21.26918897473057],[-157.80112885951164,21.269166085639945],[-157.80112885951164,21.269166085639945]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.8011123156246,21.26919044272288],[-157.80112593318484,21.269170161250173],[-157.80116002537468,21.269193050340803],[-157.80114638849875,21.26921333181351],[-157.8011123156246,21.26919044272288],[-157.8011123156246,21.26919044272288]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.8011820188577,21.26908621136969],[-157.80120686684884,21.269086060069906],[-157.80120709756508,21.269127779561472],[-157.80118226866747,21.26912793381656],[-157.80118202839964,21.269086212856998],[-157.8011820188577,21.26908621136969]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.8010962645675,21.26909648894663],[-157.80107263487182,21.269102799924024],[-157.80108325873448,21.269142475150215],[-157.8011068599369,21.269136144155468],[-157.8010962356026,21.26909648823921],[-157.8010962645675,21.26909648894663]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.801068841846,21.269103837589935],[-157.80104521215029,21.26911014856733],[-157.80105583601298,21.26914982379352],[-157.80107943721538,21.269143492798772],[-157.80106881288108,21.269103836882515],[-157.801068841846,21.269103837589935]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80104141912446,21.269111186233243],[-157.80101778942878,21.269117497210633],[-157.80102841376308,21.269157153126894],[-157.8010520050747,21.269150831551304],[-157.80104138050459,21.269111185290008],[-157.80104141912446,21.269111186233243]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80101399640293,21.269118534876544],[-157.80099036670725,21.269124845853938],[-157.80100099104155,21.2691645017702],[-157.8010245823532,21.26915818019461],[-157.80101395778308,21.269118533933312],[-157.80101399640293,21.269118534876544]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80098657391724,21.269125873864883],[-157.80096294398572,21.269132194497242],[-157.80097356832002,21.2691718504135],[-157.80099715963166,21.269165528837913],[-157.80098653529737,21.269125872921652],[-157.80098657391724,21.269125873864883]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80095913188578,21.269133222036572],[-157.80093552126422,21.269139543140547],[-157.80094614559852,21.269179199056804],[-157.80096975622007,21.269172877952833],[-157.80095913188578,21.269133222036572],[-157.80095913188578,21.269133222036572]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80093170916427,21.269140570679877],[-157.8009080985427,21.269146891783848],[-157.8009187231128,21.269186538045147],[-157.80094233373438,21.269180216941173],[-157.80093170916427,21.269140570679877],[-157.80093170916427,21.269140570679877]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80090428667856,21.269147909668217],[-157.8008806758212,21.269154240427152],[-157.80089130039127,21.26919388668845],[-157.80091491101285,21.269187565584474],[-157.80090428667856,21.269147909668217],[-157.80090428667856,21.269147909668217]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80087686395703,21.26915525831152],[-157.80085325309966,21.269161589070457],[-157.80086387766977,21.269201235331753],[-157.80088748829132,21.26919491422778],[-157.80087686395703,21.26915525831152],[-157.80087686395703,21.26915525831152]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80084944123553,21.269162606954826],[-157.80082583037813,21.26916893771376],[-157.80083645518405,21.269208574320093],[-157.80086006580564,21.26920225321612],[-157.80084944123553,21.269162606954833],[-157.80084944123553,21.269162606954826]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.800822018514,21.26916995559813],[-157.80079840765663,21.269176286357066],[-157.80080903246255,21.269215922963397],[-157.8008326430841,21.269209601859423],[-157.800822018514,21.269169955598127],[-157.800822018514,21.26916995559813]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80079459602828,21.269177294586466],[-157.8007709950617,21.26918361592625],[-157.800781619396,21.26922327184251],[-157.80080524932748,21.26921695121015],[-157.8007946249932,21.26917729529389],[-157.80079459602828,21.269177294586466]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80076717330678,21.269184643229774],[-157.80074357234017,21.269190964569553],[-157.80075419667446,21.269230620485814],[-157.80077782707758,21.269224280543526],[-157.80076720203587,21.26918465359216],[-157.80076717330678,21.269184643229774]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80073975058525,21.269191991873075],[-157.80071614961867,21.269198313212858],[-157.80072677418875,21.269237959474154],[-157.80075040435605,21.269231629186827],[-157.80073977931434,21.269192002235464],[-157.80073975058525,21.269191991873075]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80071232809954,21.269199330861415],[-157.80068872689714,21.269205661856162],[-157.80069935146724,21.269245308117455],[-157.80072298163455,21.269238977830135],[-157.80071235682863,21.269199341223803],[-157.80071232809954,21.269199330861415]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80150239960614,21.269211821184424],[-157.80151999299562,21.269228755905086],[-157.80149156669114,21.269258347906547],[-157.80147392177608,21.269241447384314],[-157.80150237694014,21.269211857951838],[-157.80150239960614,21.269211821184424]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.8014821348724,21.269192001598114],[-157.80149974750128,21.26920893802821],[-157.80147129319388,21.269238517841476],[-157.80145368056014,21.26922158140172],[-157.8014821348724,21.269192001598114],[-157.8014821348724,21.269192001598114]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.8014625895824,21.26917303143851],[-157.80148018382855,21.269189956539957],[-157.80145172866156,21.269219545972433],[-157.80143413527594,21.269202611251774],[-157.80146259920258,21.26917303229806],[-157.8014625895824,21.26917303143851]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80144283100566,21.269153625362453],[-157.80146045325762,21.2691705626521],[-157.8014319884724,21.26920015122503],[-157.80141437584834,21.269183214794932],[-157.80144282843665,21.26915365422975],[-157.80144283100566,21.269153625362453]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80142294566872,21.269134227398986],[-157.8014405582928,21.269151163829086],[-157.8014121031258,21.269180753261562],[-157.80139449050176,21.269163816831462],[-157.80142294566872,21.269134227398986],[-157.80142294566872,21.269134227398986]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80140251159244,21.269114567254025],[-157.80142013213592,21.269131523782097],[-157.80139167696896,21.269161113214572],[-157.80137406519478,21.269144167165262],[-157.80140251159244,21.269114567254025],[-157.80140251159244,21.269114567254025]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80138225068129,21.269094922532638],[-157.80139987207465,21.2691118694415],[-157.80137141776723,21.26914144925476],[-157.8013538243816,21.269124514534102],[-157.8013822498314,21.26909493215185],[-157.80138225068129,21.269094922532638]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80136200519368,21.269075104655766],[-157.80137961781776,21.269092041085862],[-157.80135117227965,21.26912163137789],[-157.80133355002673,21.26910469408824],[-157.80136200519368,21.269075104655766],[-157.80136200519368,21.269075104655766]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80134245989981,21.26905613450582],[-157.80136005328544,21.26907306922648],[-157.80133160774733,21.269102659508846],[-157.80131399511362,21.26908572307875],[-157.8013424502806,21.269056133646274],[-157.80134245989981,21.26905613450582]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.8013227561497,21.269037528388996],[-157.80134037754306,21.269054475297853],[-157.80131191361642,21.269084054251568],[-157.8012943009827,21.26906711781181],[-157.8013227561497,21.269037528388996],[-157.8013227561497,21.269037528388996]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80130267056703,21.269019072499933],[-157.80132028320074,21.269036008930033],[-157.8012918288933,21.269065588743295],[-157.8012742355077,21.269048654022637],[-157.8013026609478,21.269019071640386],[-157.80130267056703,21.269019072499933]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.801282194595,21.268999447412945],[-157.8013001091329,21.26901604227407],[-157.80127221975144,21.269046137796895],[-157.80125430779216,21.269029514068475],[-157.80128219716397,21.268999418555307],[-157.801282194595,21.268999447412945]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80126114902262,21.268980556988506],[-157.80127923202232,21.268997002017834],[-157.80125160983476,21.26902736373016],[-157.8012335364446,21.26901091955072],[-157.80126115864184,21.268980557848053],[-157.80126114902262,21.268980556988506]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.8012393227874,21.268961286779],[-157.80125748169777,21.268977641613724],[-157.80122999266288,21.269008141230405],[-157.80121184337176,21.26899178725523],[-157.8012393227874,21.268961286779],[-157.8012393227874,21.268961286779]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80117216648526,21.2689055471979],[-157.80119126853236,21.268920783683242],[-157.80116565451,21.268952875569376],[-157.8011465558914,21.26893760059752],[-157.80117217420187,21.268905460615326],[-157.80117216648526,21.2689055471979]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.801146875624,21.268887510179198],[-157.80116687784013,21.26890156633112],[-157.80114327415595,21.268935146181985],[-157.80112329031869,21.26892110135871],[-157.80114688438366,21.26888752065796],[-157.801146875624,21.268887510179198]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80119554328735,21.268923084123774],[-157.80121427542937,21.26893877248033],[-157.80118791178447,21.26897024494131],[-157.80116919011152,21.268954547815433],[-157.80119555547554,21.268923056116023],[-157.80119554328735,21.268923084123774]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80121748027872,21.26894219935385],[-157.8012358878496,21.268958266046795],[-157.80120889450356,21.268989187943056],[-157.80119049655192,21.26897312210966],[-157.80121749246692,21.268942171346104],[-157.80121748027872,21.26894219935385]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80067684066313,21.269209568415015],[-157.8006555614289,21.269221575056516],[-157.8006757384713,21.2692573291392],[-157.80069704376243,21.269245306552598],[-157.80067687107567,21.269209571293054],[-157.80067684066313,21.269209568415015]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80064844014024,21.26922603532902],[-157.8006291089994,21.2692409624543],[-157.80065419552,21.269273448969603],[-157.80067356265562,21.269258507811475],[-157.80064847613502,21.26922602130583],[-157.80064844014024,21.26922603532902]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80062596963023,21.269243387094708],[-157.80060662947864,21.269258317735442],[-157.8006317159992,21.269290804250744],[-157.80065105615083,21.269275873610006],[-157.80062596963023,21.269243387094708],[-157.80062596963023,21.269243387094708]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80060349560478,21.26926072986894],[-157.8005841555401,21.26927566049036],[-157.8006092454892,21.26930815601643],[-157.80062858563116,21.26929322538535],[-157.80060349560478,21.26926072986894],[-157.80060349560478,21.26926072986894]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.8011463003545,21.26906257379614],[-157.8011589696883,21.269041700761164],[-157.80119407705277,21.269062984322122],[-157.80118137030448,21.26908394691429],[-157.80114627139062,21.269062635644975],[-157.8011463003545,21.26906257379614]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.8011214501034,21.269104610750706],[-157.80110229859847,21.269089447935396],[-157.80112775667564,21.269057258340855],[-157.80114691783842,21.269072421156164],[-157.8011214501034,21.269104610750706],[-157.8011214501034,21.269104610750706]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80101549726587,21.26900568009301],[-157.80099205767812,21.269012575793727],[-157.8010036470911,21.269051950824313],[-157.80102711565237,21.269045055123595],[-157.8010155262394,21.26900568009301],[-157.80101549726587,21.26900568009301]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.8009888609317,21.269013512604612],[-157.8009654310018,21.26902040830533],[-157.8009770204148,21.26905979299376],[-157.8010004503447,21.26905289729304],[-157.8009888609317,21.269013512604612],[-157.8009888609317,21.269013512604612]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80096224391323,21.269021345116215],[-157.80093879466764,21.269028240816933],[-157.80095038408064,21.26906754824261],[-157.8009738236684,21.269060642884046],[-157.8009622342554,21.269021258195618],[-157.80096224391323,21.269021345116215]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80093561723695,21.26902918728566],[-157.8009121776492,21.269036073328536],[-157.80092376706216,21.269075477332656],[-157.80094719699207,21.269068581631934],[-157.80093560757908,21.26902920660135],[-157.80093561723695,21.26902918728566]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80090899056063,21.269037019797263],[-157.80088554131504,21.269043915497985],[-157.800897130728,21.26908329052857],[-157.8009205799736,21.269076336880783],[-157.80090899056063,21.269036932876666],[-157.80090899056063,21.269037019797263]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.8008823638843,21.269044861966712],[-157.80085891463872,21.269051748009588],[-157.8008705040517,21.269091123040173],[-157.80089394363944,21.26908422733945],[-157.80088235422647,21.269044852308866],[-157.8008823638843,21.269044861966712]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80085572755016,21.26905268482047],[-157.8008322879624,21.26905958052119],[-157.80084387737537,21.26909896520962],[-157.80086731696312,21.2690920695089],[-157.80085572755016,21.26905268482047],[-157.80085572755016,21.26905268482047]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80082910087384,21.26906050767423],[-157.8008056612861,21.269067413032793],[-157.80081725069908,21.26910679772122],[-157.80084071926035,21.269099911678346],[-157.80082912984736,21.26906050767423],[-157.80082910087384,21.26906050767423]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.8008024645397,21.269068349843675],[-157.80077903460977,21.26907525520224],[-157.80079062402277,21.269114630232824],[-157.80081405395265,21.269107734532106],[-157.8008024645397,21.269068349843675],[-157.8008024645397,21.269068349843675]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.8007758475212,21.269076192013124],[-157.80075240793346,21.26908308771384],[-157.80076399734645,21.269122462744427],[-157.80078742727633,21.26911556704371],[-157.80077583786337,21.269076259618032],[-157.8007758475212,21.269076192013124]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.8007492208449,21.269084024524727],[-157.80072578125717,21.26909092988329],[-157.80073737067013,21.26913029525603],[-157.80076080060005,21.269123399555312],[-157.80074921118705,21.269084024524727],[-157.8007492208449,21.269084024524727]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.8007197933938,21.269107734532106],[-157.8007018780929,21.269124346024036],[-157.8006739669233,21.269094252181677],[-157.80069189188205,21.269077640689744],[-157.80071980305163,21.26910774418995],[-157.8007197933938,21.269107734532106]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80116210401607,21.269285078356397],[-157.80113831729642,21.269290608283427],[-157.80114759465047,21.26933058299853],[-157.8011714096,21.269325064738172],[-157.80116210401607,21.269285078356397],[-157.80116210401607,21.269285078356397]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80113492204268,21.269291397087848],[-157.80111112637022,21.269296916700306],[-157.80112040304823,21.269336901053936],[-157.80114422337718,21.269331305714324],[-157.80113491846927,21.269291309703675],[-157.80113492204268,21.269291397087848]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80110773110684,21.269297705514383],[-157.80108393543438,21.269303225126837],[-157.80109321143632,21.269343219118998],[-157.8011170270619,21.269337691210453],[-157.80110772147796,21.269297704838333],[-157.80110773110684,21.269297705514383]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80108054018064,21.2693040139216],[-157.80105674383213,21.269309543172586],[-157.80106602051015,21.269349527526217],[-157.8010898361357,21.269343999636988],[-157.80108062688876,21.269304019996383],[-157.80108054018064,21.2693040139216]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80105335754087,21.269310342291583],[-157.8010295439531,21.269315841294198],[-157.80103882958394,21.269355835952748],[-157.80106262526604,21.269350316340294],[-157.80105335754087,21.269310342291583],[-157.80105335754087,21.269310342291583]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.8010261576522,21.269316640413198],[-157.80100234271234,21.269322158673553],[-157.8010116503051,21.269362116149406],[-157.8010354403953,21.2693565380587],[-157.8010261643837,21.269316544056885],[-157.8010261576522,21.269316640413198]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80099896671632,21.269322948820417],[-157.8009751511101,21.26932847672896],[-157.800984456694,21.269368463101078],[-157.80100824137585,21.26936296208963],[-157.80099896267936,21.26932300663227],[-157.80099896671632,21.269322948820417]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80097177511408,21.269329266885478],[-157.80094796017423,21.269334785145833],[-157.80095726509177,21.269374781166142],[-157.8009810807077,21.269369253257597],[-157.80097177511408,21.269329266885478],[-157.80097177511408,21.269329266885478]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.800944574559,21.269335574626304],[-157.80092077888656,21.269341094248418],[-157.8009300548885,21.26938108823092],[-157.80095387050443,21.269375560322374],[-157.80094456492048,21.269335573950254],[-157.800944574559,21.269335574626304]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80091472230762,21.269343112650922],[-157.80089133846496,21.26935018618153],[-157.80090321000287,21.26938947831884],[-157.80092661315157,21.269382404875152],[-157.80091471265945,21.26934311261229],[-157.80091472230762,21.269343112650922]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80088800202748,21.269351204987508],[-157.80086461832002,21.26935824954458],[-157.80087648979034,21.269397551339733],[-157.80089979634127,21.26939048712895],[-157.80088799236964,21.26935120493922],[-157.80088800202748,21.269351204987508]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.8008612818729,21.2693592683409],[-157.80083787875319,21.26936633212674],[-157.80084977939018,21.269405595425727],[-157.80087315377781,21.26939847356727],[-157.8008612822882,21.269359171772116],[-157.8008612818729,21.2693592683409]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80083456167003,21.269367341361797],[-157.80081115851166,21.26937441480548],[-157.80082305901345,21.269413707078],[-157.80084642340523,21.269406662434008],[-157.80083456140926,21.269367399299203],[-157.80083456167003,21.269367341361797]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.800807831761,21.269375423992248],[-157.80078444796663,21.26938248786501],[-157.80079632910446,21.26942178970845],[-157.80081971294712,21.26941471616819],[-157.8008078414285,21.26937542403088],[-157.800807831761,21.269375423992248]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80078112122564,21.269383497061433],[-157.80075771810593,21.269390560847274],[-157.80076959925339,21.269429862690714],[-157.80079300241175,21.26942278923737],[-157.80078112122564,21.269383497061433],[-157.80078112122564,21.269383497061433]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80075439136493,21.269391570024382],[-157.80073100752224,21.269398643564642],[-157.80074287905052,21.26943793570195],[-157.80076628220888,21.269430862248612],[-157.80075438169743,21.26939156998575],[-157.80075439136493,21.269391570024382]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80072766141728,21.269399662322332],[-157.800704287358,21.269406706918037],[-157.80071615884765,21.26944600871319],[-157.8007395619577,21.26943894492735],[-157.80072766146557,21.26939965266449],[-157.80072766141728,21.269399662322332]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80125340317025,21.269170296581517],[-157.80126786833895,21.26915059077386],[-157.8013009561007,21.26917490454154],[-157.8012864716386,21.269194609421145],[-157.80125341281692,21.26917029704554],[-157.80125340317025,21.269170296581517]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.8012368800303,21.269192784761632],[-157.80125134427095,21.269173098247357],[-157.801284422386,21.269197411551012],[-157.80126996779205,21.269217098529307],[-157.8012368703836,21.269192784297598],[-157.8012368800303,21.269192784761632]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.8012203559623,21.26921529223513],[-157.801234821131,21.269195586427475],[-157.80126789924608,21.269219899731127],[-157.80125343407738,21.269239605538786],[-157.80122034631563,21.269215291771104],[-157.8012203559623,21.26921529223513]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80120382317568,21.269237779951222],[-157.80121828741633,21.269218093436944],[-157.80125136553139,21.2692424067406],[-157.80123690175475,21.269262083608183],[-157.8012038236397,21.26923777030453],[-157.80120382317568,21.269237779951222]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80118729957172,21.269260277778027],[-157.80120176334833,21.269240600910443],[-157.80123484239144,21.269264894920713],[-157.8012203781508,21.26928458143499],[-157.80118730003574,21.269260268131337],[-157.80118729957172,21.269260277778027]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80117076632106,21.269282775140812],[-157.8011852305617,21.269263088626534],[-157.80121831832346,21.269287402394216],[-157.80120383525346,21.269307078333746],[-157.80117077643177,21.269282765958145],[-157.80117076632106,21.269282775140812]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.8010058104482,21.26897624298405],[-157.8010172549935,21.268954126520953],[-157.80105439906208,21.268973345630805],[-157.8010429545168,21.2689954620939],[-157.80100586839526,21.26897624298405],[-157.8010058104482,21.26897624298405]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80094310206616,21.268962982764037],[-157.80094735151758,21.268938451839905],[-157.80098856153853,21.26894559864457],[-157.8009842155087,21.268970129568704],[-157.80094301514555,21.268962982764037],[-157.80094310206616,21.268962982764037]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.8008686207721,21.268964479729878],[-157.80086508600112,21.268939852227305],[-157.80090647952113,21.26893389333747],[-157.8009100142921,21.26895854015573],[-157.80086861111425,21.26896446041419],[-157.8008686207721,21.268964479729878]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80079507628892,21.268991743823904],[-157.8007865001233,21.26896837184107],[-157.80082575925977,21.268953962337605],[-157.80083433542538,21.26897733432044],[-157.80079507628892,21.268991743823904],[-157.80079507628892,21.268991743823904]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80073754451132,21.269029660520026],[-157.8007216090685,21.269010537988613],[-157.80075374071598,21.268983766444638],[-157.8007696761588,21.26900288897605],[-157.80073754451132,21.269029660520026],[-157.80073754451132,21.269029660520026]]]},"type":"Feature","properties":{}},{"geometry":{"type":"Polygon","coordinates":[[[-157.80069301219197,21.26907213571858],[-157.80067411179098,21.2690559298561],[-157.80070134691147,21.269024184522394],[-157.80072023765462,21.26904031312212],[-157.80069300253413,21.269072048797984],[-157.80069301219197,21.26907213571858]]]},"type":"Feature","properties":{}}]}
            map.data.addGeoJson(geojson);
            map.data.setStyle({fillColor:'green', fillOpacity: 0.7, strokeColor:'yellow', strokeOpacity:0.7})
            zoom(map);
          }

          /**
           * Update a map's viewport to fit each geometry in a dataset
           * @param {google.maps.Map} map The map to adjust
           */
          function zoom(map) {
            var bounds = new google.maps.LatLngBounds();
            map.data.forEach(function(feature) {
              processPoints(feature.getGeometry(), bounds.extend, bounds);
            });
            map.fitBounds(bounds);
          }

          /**
           * Process each point in a Geometry, regardless of how deep the points may lie.
           * @param {google.maps.Data.Geometry} geometry The structure to process
           * @param {function(google.maps.LatLng)} callback A function to call on each
           *     LatLng point encountered (e.g. Array.push)
           * @param {Object} thisArg The value of 'this' as provided to 'callback' (e.g.
           *     myArray)
           */
          function processPoints(geometry, callback, thisArg) {
            if (geometry instanceof google.maps.LatLng) {
              callback.call(thisArg, geometry);
            } else if (geometry instanceof google.maps.Data.Point) {
              callback.call(thisArg, geometry.get());
            } else {
              geometry.getArray().forEach(function(g) {
                processPoints(g, callback, thisArg);
              });
            }
          }



          /* DOM (drag/drop) functions */

          function initEvents() {
            // set up the drag & drop events
            var mapContainer = document.getElementById('map');
            var dropContainer = document.getElementById('drop-container');

            // map-specific events
            mapContainer.addEventListener('dragenter', showPanel, false);

            // overlay specific events (since it only appears once drag starts)
            dropContainer.addEventListener('dragover', showPanel, false);
            dropContainer.addEventListener('drop', handleDrop, false);
            dropContainer.addEventListener('dragleave', hidePanel, false);
          }

          function showPanel(e) {
            e.stopPropagation();
            e.preventDefault();
            document.getElementById('drop-container').style.display = 'block';
            return false;
          }

          function hidePanel(e) {
            document.getElementById('drop-container').style.display = 'none';
          }

          function handleDrop(e) {
            e.preventDefault();
            e.stopPropagation();
            hidePanel(e);

            var files = e.dataTransfer.files;
            if (files.length) {
              // process file(s) being dropped
              // grab the file data from each file
              for (var i = 0, file; file = files[i]; i++) {
                var reader = new FileReader();
                reader.onload = function(e) {
                  loadGeoJsonString(e.target.result);
                };
                reader.onerror = function(e) {
                  console.error('reading failed');
                };
                reader.readAsText(file);
              }
            } else {
              // process non-file (e.g. text or html) content being dropped
              // grab the plain text version of the data
              var plainText = e.dataTransfer.getData('text/plain');
              if (plainText) {
                loadGeoJsonString(plainText);
              }
            }

            // prevent drag event from bubbling further
            return false;
          }

          function marketVendorSelectedOnList(marketVendor) {
            console.info("HEY! NOW PAN TO THE MARKET ASSOCIATED WITH MARKETVENDOR!" + marketVendor.booth_location);
          }

          function marketVendorSelectedOnMap(marketVendor) {
            //HEY MCKAY - you can call this function when a marker is selectedo n the map - pass in the instance of MarketVendor.
            scope.vm.onMarketVendorSelected({marketVendor: marketVendor});
          }


          function initialize() {
            initMap();
            //initEvents();
            scope.$on('market-vendor-selected-on-list', function(event, marketVendor) {
              marketVendorSelectedOnList(marketVendor);
            });
          }
          initialize();
      }
    };
  }
})();
